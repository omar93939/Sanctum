{% extends "layout.njk" %}

{% block head %}
  <title>{{ video.title }} | Sanctum</title>
  <meta name="description" content="Watch {{ video.title }} on Sanctum. If you're looking for {{ video.displayname or video.username }} videos, you'll find them here!">
  <link rel="stylesheet" href="/css/min/watch.css?v=1.2">
  <link rel="canonical" href="https://sanctum.{{ DOMAIN }}/watch?v={{ videouid }}">
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "VideoObject",
      "name": "{{ video.title }}",
      "description": "Watch {{ video.title }} on Sanctum. If you're looking for {{ video.displayname or video.username }} videos, you'll find them here!",
      "thumbnailUrl": "https://sanctum.{{ DOMAIN }}/{{ videouid }}/thumbnail.webp",
      "uploadDate": "{{ video.datetime }}",
      "author": "{{ video.displayname or video.username }}",
      "embedUrl": "https://sanctum.{{ DOMAIN }}/embed?v={{ videouid }}",
      "duration": "{{ duration }}"
    }
  </script>
  <meta name="thumbnail" content="https://sanctum.{{ DOMAIN }}/{{ videouid }}/thumbnail.jpg">
  <meta property="og:site_name" content="Sanctum">
  <meta property="og:url" content="https://sanctum.{{ DOMAIN }}/watch?v={{ videouid }}">
  <meta property="og:type" content="video.movie">
  <meta property="og:title" content="{{ video.title }}">
  <meta property="og:description" content="Watch {{ video.title }} on Sanctum. If you're looking for {{ video.displayname or video.username }} videos, you'll find them here!">
  <meta property="og:image" content="https://sanctum.{{ DOMAIN }}/{{ videouid }}/thumbnail.jpg">
  <meta property="og:image:secure_url" content="https://sanctum.{{ DOMAIN }}/{{ videouid }}/thumbnail.jpg">
  <meta property="og:image:type" content="image/jpeg">
  <meta property="og:image:alt" content="Thumbnail for {{ video.title }}">
  <meta property="og:video" content="https://sanctum.{{ DOMAIN }}/embed?v={{ videouid }}">
  <meta property="og:video:url" content="https://sanctum.{{ DOMAIN }}/embed?v={{ videouid }}">
  <meta property="og:video:secure_url" content="https://sanctum.{{ DOMAIN }}/embed?v={{ videouid }}">
  <meta property="og:video:type" content="text/html">
  <meta property="og:video:iframe" content="{% else %}https://sanctum.{{ DOMAIN }}/embed?v={{ videouid }}">
  <meta property="og:video:width" content="{{ video.width }}">
  <meta property="og:video:height" content="{{ video.height }}">
  <meta property="og:video:duration" content="{{ video.duration }}">
  <meta property="video:duration" content="{{ video.duration }}">
  <script>
    window.isSmall = window.innerWidth < 1100;
  </script>
  <meta name="twitter:card" content="player">
  {# <meta name="twitter:site" content="@Sanctum">
  <meta name="twitter:creator" content="@Sanctum"> #}
  <meta name="twitter:title" content="{{ video.title }}">
  <meta name="twitter:url" content="https://sanctum.{{ DOMAIN }}/watch?v={{ videouid }}">
  <meta name="twitter:image" content="https://sanctum.{{ DOMAIN }}/{{ videouid }}/thumbnail.jpg">
  <meta name="twitter:domain" content="{{ DOMAIN }}">
  <meta name="twitter:player" content="https://sanctum.{{ DOMAIN }}/embed?v={{ videouid }}">
  <meta name="twitter:player:width" content="{{ video.width }}">
  <meta name="twitter:player:height" content="{{ video.height }}">
  <meta name="twitter:description" content="Watch {{ video.title }} on Sanctum. If you're looking for {{ video.displayname or video.username }} videos, you'll find them here!">
{% endblock %}

{% block main %}

  <datalist id="video-data" data-categories="{{ video.categories }}" data-username="{{ video.username }}" data-id="{{ videouid }}" data-prod="{{ video.production }}" data-libraryid="{{ bunnyInfo.libraryid }}" data-streamstorage="{{ bunnyInfo.streamstorage }}"></datalist>
  <div id="video">
    <iframe id="player" title="Watch {{ video.title }}" src="{% if video.embed %}{{video.embed}}?quality=1080p{% else %}https://iframe.mediadelivery.net/embed/{{ bunnyInfo.libraryid }}/{{ videouid }}?autoplay=true{% endif %}" width="1280" height="720" allow="accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;" allowfullscreen="true"></iframe>
  </div>
  <div id="content-wrapper">
    <div id="left-content-wrapper">
      <div id="video-wrapper">
        <div id="under-player">
          <ins class="adsbyexoclick ad-insert" data-zoneid="5001146" data-sub="{{ video.userid }}"></ins>
        </div>
        <div id="title-wrapper">
          <h1 id="title">{{ video.title }}</h1>
        </div>
        <div id="actions-menu">
          <div id="viewcount-wrapper">
            <var id="views" data-count="{{ video.views }}">{{ video.views }} Views</var>
            <div>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M313.4 32.9c26 5.2 42.9 30.5 37.7 56.5l-2.3 11.4c-5.3 26.7-15.1 52.1-28.8 75.2l144 0c26.5 0 48 21.5 48 48c0 18.5-10.5 34.6-25.9 42.6C497 275.4 504 288.9 504 304c0 23.4-16.8 42.9-38.9 47.1c4.4 7.3 6.9 15.8 6.9 24.9c0 21.3-13.9 39.4-33.1 45.6c.7 3.3 1.1 6.8 1.1 10.4c0 26.5-21.5 48-48 48l-97.5 0c-19 0-37.5-5.6-53.3-16.1l-38.5-25.7C176 420.4 160 390.4 160 358.3l0-38.3 0-48 0-24.9c0-29.2 13.3-56.7 36-75l7.4-5.9c26.5-21.2 44.6-51 51.2-84.2l2.3-11.4c5.2-26 30.5-42.9 56.5-37.7zM32 192l64 0c17.7 0 32 14.3 32 32l0 224c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32L0 224c0-17.7 14.3-32 32-32z"/></svg>
              <var id="rating">{{ video.rating }}%</var>
            </div>
            <var id="upload-date">{{ video.datetimeago }}</var>
          </div>
          <div id="actions">
            <span id="like-button" data-active="{{ viewerState.reaction }}">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M313.4 32.9c26 5.2 42.9 30.5 37.7 56.5l-2.3 11.4c-5.3 26.7-15.1 52.1-28.8 75.2l144 0c26.5 0 48 21.5 48 48c0 18.5-10.5 34.6-25.9 42.6C497 275.4 504 288.9 504 304c0 23.4-16.8 42.9-38.9 47.1c4.4 7.3 6.9 15.8 6.9 24.9c0 21.3-13.9 39.4-33.1 45.6c.7 3.3 1.1 6.8 1.1 10.4c0 26.5-21.5 48-48 48l-97.5 0c-19 0-37.5-5.6-53.3-16.1l-38.5-25.7C176 420.4 160 390.4 160 358.3l0-38.3 0-48 0-24.9c0-29.2 13.3-56.7 36-75l7.4-5.9c26.5-21.2 44.6-51 51.2-84.2l2.3-11.4c5.2-26 30.5-42.9 56.5-37.7zM32 192l64 0c17.7 0 32 14.3 32 32l0 224c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32L0 224c0-17.7 14.3-32 32-32z"/></svg>
              <var id="likes" data-count="{{ video.likes }}">{{ video.likes }}</var>
            </span>
            <span id="dislike-button">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path transform="scale(-1 1) translate(-512 0)" d="M313.4 479.1c26-5.2 42.9-30.5 37.7-56.5l-2.3-11.4c-5.3-26.7-15.1-52.1-28.8-75.2l144 0c26.5 0 48-21.5 48-48c0-18.5-10.5-34.6-25.9-42.6C497 236.6 504 223.1 504 208c0-23.4-16.8-42.9-38.9-47.1c4.4-7.3 6.9-15.8 6.9-24.9c0-21.3-13.9-39.4-33.1-45.6c.7-3.3 1.1-6.8 1.1-10.4c0-26.5-21.5-48-48-48l-97.5 0c-19 0-37.5 5.6-53.3 16.1L202.7 73.8C176 91.6 160 121.6 160 153.7l0 38.3 0 48 0 24.9c0 29.2 13.3 56.7 36 75l7.4 5.9c26.5 21.2 44.6 51 51.2 84.2l2.3 11.4c5.2 26 30.5 42.9 56.5 37.7zM32 384l64 0c17.7 0 32-14.3 32-32l0-224c0-17.7-14.3-32-32-32L32 96C14.3 96 0 110.3 0 128L0 352c0 17.7 14.3 32 32 32z"/></svg>
              <var id="dislikes" data-count="{{ video.dislikes }}">{{ video.dislikes }}</var>
            </span>
            <span id="favorite-button" data-active="{{ viewerState.favorited }}">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>
              <var id="favorites" data-count="{{ video.dislikes }}">{{ video.favorites }}</var>
            </span>
            <div id="action-buttons">
              <span id="report-button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M64 32C64 14.3 49.7 0 32 0S0 14.3 0 32L0 64 0 368 0 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-128 64.3-16.1c41.1-10.3 84.6-5.5 122.5 13.4c44.2 22.1 95.5 24.8 141.7 7.4l34.7-13c12.5-4.7 20.8-16.6 20.8-30l0-247.7c0-23-24.2-38-44.8-27.7l-9.6 4.8c-46.3 23.2-100.8 23.2-147.1 0c-35.1-17.6-75.4-22-113.5-12.5L64 48l0-16z"/></svg>
                <var>Report</var>
              </span>
              <span id="share-button" onclick="document.getElementById('share-wrapper').classList.toggle('show');this.classList.toggle('active')">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M307 34.8c-11.5 5.1-19 16.6-19 29.2l0 64-112 0C78.8 128 0 206.8 0 304C0 417.3 81.5 467.9 100.2 478.1c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-7.5-4.3-14.4-9.8-19.5C108.8 431.9 96 414.4 96 384c0-53 43-96 96-96l96 0 0 64c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4z"/></svg>
                <var>Share</var>
              </span>
            </div>
          </div>
        </div>
        <div id="share-wrapper" class="hidden-field">
          <div id="share-types">
            <button onclick="toggleWatchShare(this, 'direct')" disabled>Link</button>
            {% if not video.embed %}
              <button onclick="toggleWatchShare(this, 'embed')">Embed</button>
            {% endif %}
          </div>
          <div id="share-links">
            <div id="share-direct">
              <input type="text" value="https://sanctum.{{ DOMAIN }}/watch?v={{ videouid }}" readonly onclick="this.select()">
            </div>
            {% if not video.embed %}
              <div id="share-embed" class="no-display">
                <input type="text" value="<iframe src='https://sanctum.{{ DOMAIN }}/embed?v={{ videouid }}' width='1280' height='720'></iframe>" readonly onclick="this.select()">
              </div>
            {% endif %}
          </div>
          <button id="copy-button" onclick="copyWatchShare(this)">Copy</button>
        </div>
        <div id="info-wrapper">
            <div id="info-sections">
              <div class="info-section clearfix">
                <div id="details">
                  <div id="creator-details">
                    <div>
                      <div id="creator-pic">
                        <img loading="lazy" src="https://cdn.{{ DOMAIN }}/sanctum/pp/{{ video.pp }}.webp" alt="avatar">
                      </div>
                      <div id="creator-info">
                        <div id="creator-username"><a href="/profile/{{ video.username }}/videos">{{ video.displayname or video.username }}</a></div>
                        <span>{{ video.videocount }} Videos</span>
                        <span class="separator"></span>
                        <span id="creator-subscribers">{{ video.subs }}</span>
                      </div>
                    </div>
                    <div id="creator-buttons">
                      {% if session.type >= 99 or session.userid == video.userid %}
                        <button id="edit-button" class="creator-button" onclick="location.href='/edit/{{ videouid }}'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"/></svg>Edit Video</button>
                      {% else %}
                        {% if video.accounttype == 4 %}<button id="chat-button" onclick="location.href='/chat#{{ video.username }}'" class="creator-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M512 240c0 114.9-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6C73.6 471.1 44.7 480 16 480c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4c0 0 0 0 0 0s0 0 0 0s0 0 0 0c0 0 0 0 0 0l.3-.3c.3-.3 .7-.7 1.3-1.4c1.1-1.2 2.8-3.1 4.9-5.7c4.1-5 9.6-12.4 15.2-21.6c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208z"/></svg>Chat</button>{% endif %}
                        {% if viewerState.subscribed %}
                          <form id="unsubscribe" class="no-display" method="post" action="/profile/{{ video.username }}/unsubscribe?w={{ videouid }}"></form>
                          <button id="subscribe-button" class="creator-button subscribed" type="submit" form="unsubscribe">
                            <svg class="social-button-icon green" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/></svg>
                            <span class="subscribe-button-text"></span>
                          </button>
                        {% else %}
                          {% if session.authorized %}
                            <form id="subscribe" class="no-display" method="post" action="/profile/{{ video.username }}/subscribe?w={{ videouid }}"></form>
                            <button id="subscribe-button" class="creator-button" type="submit" form="subscribe">
                              <svg class="social-button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/></svg>
                              <span class="subscribe-button-text">Subscribe</span>
                            </button>
                          {% else %}
                            <button id="subscribe-button" class="creator-button" onclick="signBox('signin')">
                              <svg class="social-button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/></svg>
                              <span class="subscribe-button-text">Subscribe</span>
                            </button>
                          {% endif %}
                        {% endif %}
                      {% endif %}
                    </div>
                  </div>
                  <div id="categories" class="details-row">
                    <div>Categories</div>
                  </div>
                  <div id="details-wrapper" class="hidden-field">
                    <div class="details-row">
                      <div>Tags</div>
                    </div>
                    <div class="details-row">
                      <div>Production</div>
                    </div>
                  </div>
                  <div id="more-details">
                    VIEW MORE
                  </div>
                </div>
              </div>
            </div>
        </div>
      </div>
      <div id="recommended-wrapper">
        <ul id="recommended-videos"></ul>
        <div id="recommended-buttons">
          <button class="recommended-button recommended-left" aria-label="Go to previous recommended Videos" type="button" disabled><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M177.5 414c-8.8 3.8-19 2-26-4.6l-144-136C2.7 268.9 0 262.6 0 256s2.7-12.9 7.5-17.4l144-136c7-6.6 17.2-8.4 26-4.6s14.5 12.5 14.5 22l0 72 288 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32l-288 0 0 72c0 9.6-5.7 18.2-14.5 22z"/></svg></button>
          <h2>1</h2>
          <button class="recommended-button recommended-right" aria-label="Go to next recommended Videos" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M334.5 414c8.8 3.8 19 2 26-4.6l144-136c4.8-4.5 7.5-10.8 7.5-17.4s-2.7-12.9-7.5-17.4l-144-136c-7-6.6-17.2-8.4-26-4.6s-14.5 12.5-14.5 22l0 72L32 192c-17.7 0-32 14.3-32 32l0 64c0 17.7 14.3 32 32 32l288 0 0 72c0 9.6 5.7 18.2 14.5 22z"/></svg></button>
        </div>
      </div>
      <datalist id="user-data" data-username="{{ session.username }}"></datalist>
      <div id="comment-wrapper">
        <div id="comment-header"><span id="commentcount" data-count="{{ video.comments }}">All Comments ({{ video.comments }})</span></div>
        <div id="comment-section"><div class="no-display"></div></div>
      </div>
    </div>
  </div>
  <script src="/js/min/watch.js?v=1.4"></script>

{% endblock %}